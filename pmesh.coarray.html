
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>pmesh.coarray module &#8212; pmesh 0.1.46 documentation</title>
    <link rel="stylesheet" href="_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="pmesh.domain module" href="pmesh.domain.html" />
    <link rel="prev" title="pmesh.cic module" href="pmesh.cic.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="pmesh.domain.html" title="pmesh.domain module"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="pmesh.cic.html" title="pmesh.cic module"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">pmesh 0.1.46 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="modules.html" >pmesh</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="pmesh.html" accesskey="U">pmesh package</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="module-pmesh.coarray">
<span id="pmesh-coarray-module"></span><h1>pmesh.coarray module<a class="headerlink" href="#module-pmesh.coarray" title="Permalink to this headline">¶</a></h1>
<p>CoArray/MPI in Python</p>
<p>This is a failed attempt to implement the CoArray 1.0 standard:</p>
<blockquote>
<div><a class="reference external" href="http://caf.rice.edu/documentation/index.html">http://caf.rice.edu/documentation/index.html</a></div></blockquote>
<p>The implementation uses the MPI 1.0 subset, mostly because I am
not quite familar with MPI.Win objects and how they interact
with numpy. mpi4py also has a few test blacklists for versions
of openmpi that looked a bit scary.</p>
<p>The main entry object is coarray a subclass of numpy.ndarray,</p>
<p>A coarray can be created via <cite>coarray.zeros</cite> or <cite>coarray.fromarray</cite></p>
<p>A sync operation must be invoked to issue data transport.
The standard does not expect any data transfer before sync is called.</p>
<p>Comparing to CoFortran, the use of [] and () is inverted,
because in Python [] is for slicing.</p>
<p>Fortran methods (thisimage, sync) are implemented as properties.</p>
<p>The standard mentioned <cite>rank</cite>, which is <cite>ndims</cite>. co-rank becomes condims.</p>
<p>default attributes from numpy refers to local properties.</p>
<p>No methods are provided for the global shape, global ndims.</p>
<p>What doesn’t work:</p>
<p>Currently the co-ndims is limited to 1:</p>
<p>This can be done either use MPI’s Cart Comm, or do some simple encoding.
Because MPI.Comm doesn’t quite work with the life cycle of python objects,
requiring explicit MPI.Comm.Free,
reshaping the co-ndims will be difficult if we hold MPI Cart Comm objects
inside coarrays; unless we don’t care about correctness.</p>
<p>Broadcast and Gather are not supported.</p>
<p>Treating the coarray dimension as an array dimension (co-transpose) doesn’t
work neither.</p>
<p>Currently there is no way to notify the source rank which coarray to use
for the send operation.</p>
<p>We need to add all coarrays to a central repo to
do that; and then may need to crawl a dependency graph. I think there will
be a lot of trouble ahead.</p>
<p>But things may be simplified if we make use of the fact that all operations
are ran symmetrically.</p>
<p>Yu Feng &lt;<a class="reference external" href="mailto:rainwoodman&#37;&#52;&#48;gmail&#46;com">rainwoodman<span>&#64;</span>gmail<span>&#46;</span>com</a>&gt;</p>
<dl class="class">
<dt id="pmesh.coarray.Op">
<em class="property">class </em><code class="descclassname">pmesh.coarray.</code><code class="descname">Op</code><a class="reference internal" href="_modules/pmesh/coarray.html#Op"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pmesh.coarray.Op" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
</dd></dl>

<dl class="class">
<dt id="pmesh.coarray.Pull">
<em class="property">class </em><code class="descclassname">pmesh.coarray.</code><code class="descname">Pull</code><span class="sig-paren">(</span><em>coa</em>, <em>localindex</em>, <em>proxy</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pmesh/coarray.html#Pull"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pmesh.coarray.Pull" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pmesh.coarray.Op" title="pmesh.coarray.Op"><code class="xref py py-class docutils literal notranslate"><span class="pre">pmesh.coarray.Op</span></code></a></p>
<dl class="method">
<dt id="pmesh.coarray.Pull.finish">
<code class="descname">finish</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pmesh/coarray.html#Pull.finish"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pmesh.coarray.Pull.finish" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="pmesh.coarray.Pull.start">
<code class="descname">start</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pmesh/coarray.html#Pull.start"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pmesh.coarray.Pull.start" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="pmesh.coarray.Push">
<em class="property">class </em><code class="descclassname">pmesh.coarray.</code><code class="descname">Push</code><span class="sig-paren">(</span><em>proxy</em>, <em>value</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pmesh/coarray.html#Push"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pmesh.coarray.Push" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pmesh.coarray.Op" title="pmesh.coarray.Op"><code class="xref py py-class docutils literal notranslate"><span class="pre">pmesh.coarray.Op</span></code></a></p>
<dl class="method">
<dt id="pmesh.coarray.Push.finish">
<code class="descname">finish</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pmesh/coarray.html#Push.finish"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pmesh.coarray.Push.finish" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="pmesh.coarray.Push.start">
<code class="descname">start</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pmesh/coarray.html#Push.start"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pmesh.coarray.Push.start" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="pmesh.coarray.coameta">
<em class="property">class </em><code class="descclassname">pmesh.coarray.</code><code class="descname">coameta</code><span class="sig-paren">(</span><em>comm</em>, <em>coarray</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pmesh/coarray.html#coameta"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pmesh.coarray.coameta" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
</dd></dl>

<dl class="class">
<dt id="pmesh.coarray.coaproxy">
<em class="property">class </em><code class="descclassname">pmesh.coarray.</code><code class="descname">coaproxy</code><span class="sig-paren">(</span><em>coa</em>, <em>coindex</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pmesh/coarray.html#coaproxy"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pmesh.coarray.coaproxy" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<dl class="classmethod">
<dt id="pmesh.coarray.coaproxy.fancyindex">
<em class="property">classmethod </em><code class="descname">fancyindex</code><span class="sig-paren">(</span><em>parent</em>, <em>index</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pmesh/coarray.html#coaproxy.fancyindex"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pmesh.coarray.coaproxy.fancyindex" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="pmesh.coarray.coaproxy.indices">
<code class="descname">indices</code><a class="headerlink" href="#pmesh.coarray.coaproxy.indices" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="pmesh.coarray.coaproxy.isgroup">
<code class="descname">isgroup</code><a class="headerlink" href="#pmesh.coarray.coaproxy.isgroup" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="pmesh.coarray.coarray">
<em class="property">class </em><code class="descclassname">pmesh.coarray.</code><code class="descname">coarray</code><span class="sig-paren">(</span><em>shape</em>, <em>dtype=float</em>, <em>buffer=None</em>, <em>offset=0</em>, <em>strides=None</em>, <em>order=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pmesh/coarray.html#coarray"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pmesh.coarray.coarray" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">numpy.ndarray</span></code></p>
<dl class="attribute">
<dt id="pmesh.coarray.coarray.condims">
<code class="descname">condims</code><a class="headerlink" href="#pmesh.coarray.coarray.condims" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="pmesh.coarray.coarray.coshape">
<code class="descname">coshape</code><a class="headerlink" href="#pmesh.coarray.coarray.coshape" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="classmethod">
<dt id="pmesh.coarray.coarray.fromarray">
<em class="property">classmethod </em><code class="descname">fromarray</code><span class="sig-paren">(</span><em>comm</em>, <em>array</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pmesh/coarray.html#coarray.fromarray"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pmesh.coarray.coarray.fromarray" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="pmesh.coarray.coarray.getimage">
<code class="descname">getimage</code><span class="sig-paren">(</span><em>coindex</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pmesh/coarray.html#coarray.getimage"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pmesh.coarray.coarray.getimage" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="pmesh.coarray.coarray.num_images">
<code class="descname">num_images</code><a class="headerlink" href="#pmesh.coarray.coarray.num_images" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="pmesh.coarray.coarray.sync">
<code class="descname">sync</code><span class="sig-paren">(</span><em>images=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pmesh/coarray.html#coarray.sync"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pmesh.coarray.coarray.sync" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="pmesh.coarray.coarray.thisimage">
<code class="descname">thisimage</code><a class="headerlink" href="#pmesh.coarray.coarray.thisimage" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="classmethod">
<dt id="pmesh.coarray.coarray.zeros">
<em class="property">classmethod </em><code class="descname">zeros</code><span class="sig-paren">(</span><em>comm</em>, <em>shape</em>, <em>dtype='f8'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pmesh/coarray.html#coarray.zeros"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pmesh.coarray.coarray.zeros" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="function">
<dt id="pmesh.coarray.test_coarray">
<code class="descclassname">pmesh.coarray.</code><code class="descname">test_coarray</code><span class="sig-paren">(</span><em>comm</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pmesh/coarray.html#test_coarray"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pmesh.coarray.test_coarray" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="pmesh.coarray.test_cotranspose">
<code class="descclassname">pmesh.coarray.</code><code class="descname">test_cotranspose</code><span class="sig-paren">(</span><em>comm</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pmesh/coarray.html#test_cotranspose"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pmesh.coarray.test_cotranspose" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h4>Previous topic</h4>
  <p class="topless"><a href="pmesh.cic.html"
                        title="previous chapter">pmesh.cic module</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="pmesh.domain.html"
                        title="next chapter">pmesh.domain module</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/pmesh.coarray.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="pmesh.domain.html" title="pmesh.domain module"
             >next</a> |</li>
        <li class="right" >
          <a href="pmesh.cic.html" title="pmesh.cic module"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">pmesh 0.1.46 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="modules.html" >pmesh</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="pmesh.html" >pmesh package</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2017, Yu Feng.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.7.5.
    </div>
  </body>
</html>